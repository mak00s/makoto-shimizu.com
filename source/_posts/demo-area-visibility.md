---
title: Demo 06. LPのエリア精読
date: 2015-05-19 00:00:00
permalink: demo/area-visibility
tags:
  - Demo
  - Google Analytics
thumbnailImage: 
---

（このコンテンツは執筆途中です）

長いページのスクロール計測は、GTMにその機能が追加された今では、簡単に実現できるようになりました。画面の長さのうち何パーセントまでスクロールされたか、という計測もできますが、ページごとにパーセントの解釈が異なり、分析が難しくなるので、ページごとにエリアを定義し、その単位で画面にN秒間以上表示された、という計測方法がオススメです。
ただし、ページの作り方に合わせてGTMの設定を追加したり削除するのは運用が大変なので、ページ制作時に決められた属性を追加するだけで、GTMの設定を変更することなく計測すると良いでしょう。その方法についてまとめました。
<!-- more -->

## DEMO

### セクション1
<div id="sec1" data-track-name="sec1" data-track-trigger="view3sec">
（このセクションはid=sec1を付与したdivタグで囲まれています）

GTMで、このidの値「sec1」をスクロール判定条件として指定するのが安直な設定方法ですが、セクションが増えたり、名前が変わった場合にGTMの設定も合わせて更新する必要があります。

そこで、エリアのタグに以下のような特定の属性を付与し、GTMがその値を読み取って自動的に計測するようにしまてみましょう。

まず、GAのレポート上で表示される文字列を指定します。
```html
data-track-name="sec1"
```
次に、計測の条件を指定します。
```html
data-track-trigger="view3sec"
```
「view」は「表示」の意味で、さらに続けて「3sec」、つまり3秒間、という表示のタイマー時間を指定しています。
応用例として、「click」や「hover」などを条件にしたいこともあると思います。
</div>

### セクション2
<div id="sec2" data-track-name="sec1" data-track-trigger="view3sec">
ではGTMで実装してみましょう。
まず、トリガーを作ります。
トリガーのタイプは「要素の表示」、
選択方法は「CSSセレクタ」、
要素セレクタには以下のように入力します。

> [data-track-trigger="view3sec"]

トリガーを起動するタイミングは「1要素につき1度」

画面上での最小表示時間を設定、には3000（3秒）

1秒、5秒、などエリアによって表示時間を変えたい場合は、同じようにトリガーを作成します。

</div>

### セクション3
<div id="sec3" data-track-name="sec1" data-track-trigger="view3sec">
次に、セクション2で作成したトリガーを使ったGAのタグを作成します。
</div>
