---
title: スコアリングの実装方法：SiteCatalyst編
date: 2011-03-21 00:36:00
tags:
  - Adobe Analytics
---

Loftwork主催のアクセス解析研究会（2011年1月）で取り上げた**スコアリング**の実装方法を紹介します。

スコアリングの分析に関して、Adobe Analytics（旧SiteCatalyst）がGoogle Analyticsよりも優れているのは、

* ディメンションとメトリックス（指標）の両軸を使えるので、スコアリングの妥当性を検証できる
* 使えるカスタムイベント変数が多いので、複数の軸でスコアリングできる
* 訪問よりも長い期間でスコアを蓄積できる
<!-- more -->

という点です。

## 実装方法

例えば計測用JavaScript（s_code.jsやAppMeasurement.js）のs_doPlugins関数の中に、下記のようなコードを追加します。

{% gist mak00s/569fbcd5cb000e1d91c9b5aca53caf23 %}

#### サンプルコードの説明

* スコアの付与条件はサイトセクション(channel)で判別しています（ページ毎にセットされている想定） 
  * URL、ページ名、prop、eventなどによる判別でもok
  * s_doPluginsの関数は、s.t()やlinkHandlerなどがトリガーとなってコールが飛ぶ直前に実行されます
  * product変数を同じページで既に使用している場合は、統合が必要です  
例：s.products = 'カテゴリ名;製品名;1;2;event1=5';
* サイトセクションによって、3点と5点を加点しています
* event1とeVar1の変数を使った例です（番号は適宜変更してください）
* Adobe Analyticsの管理画面で、変数を有効化＆設定変更する必要があります

### 管理者による設定が必要

#### 管理者＞レポートスイート＞コンバージョン＞コンバージョン変数

新しいeVarを有効化し、下記のようにタイプを「**カウンター**」に変更します。これがスコアリング妥当性検証のためのディメンションになります。

![カウンターeVarの設定方法](/images/adobe/sc-config-evar-counter.png)

#### 管理者＞レポートスイート＞コンバージョン＞成功イベント

新しいevent変数を有効化し、下記のようにタイプを「**数値**」に変更します。

![数値イベント（インクリメンター）の設定方法](/images/adobe/sc-config-event-numeric.png)

## 分析の方法

### 1.まずスコアリングとコンバージョンの相関を調べる

eVar1は「+3」「+5」と、該当ページを閲覧する度にその人のスコアが上がっていきます。  
まず、コンバージョン発生時のスコアとコンバージョンの相関をレポートで見てみます。

| 関心度スコア | 注文 | 売上    | 注文単価 | 注文単価(1ヶ月) | 間接貢献度 |
|--------------|------|---------|----------|-----------------|------------|
| 1～10        | 221  | 120,975 | 547      | 602             | 10%        |
| 11～20       | 209  | 114,150 | 546      | 655             | 20%        |
| 21～30       | 190  | 64,500  | 339      | 475             | 40%        |
| 31～40       | 156  | 116,175 | 745      | 1,192           | 60%        |

  * 値はダミーです
  * 整数型の生データをレンジになるよう分類（SAINT）しています
  * インスタンスは意味がないので無視します
  * スコアがどの指標と相関するかは指標の性質と重みづけによります 
    * リピーターやヘビーユーザーしかスコアが高くならないので、注文件数や売上とは相関しないかも
    * スコアが顧客の優良度を表すものなら、注文単価（売上÷注文件数）とは相関するかも
  * 同一訪問内のコンバージョンだと直接効果のみになるので、長期間のコンバージョンも見ると良いです 
    * エンゲージメントのような間接指標の場合は、間接貢献度との相関が高くなる
  * 適切なスコアの閾値を見つけるのが重要です

### 2.指標として活用する

こちらが本来の活用方法ですね。コンバージョンに至らない中間または間接指標として、スコアリング結果を使います。

流入系のディメンション（チャネル、リファラドメイン、検索キーワードなど）を評価するなら、例えば：

| 流入チャネル | 直帰率 | PV÷訪問 | 関心度÷訪問 | 注文 | 注文単価 | 注文単価(1ヶ月) |
|--------------|--------|---------|-------------|------|----------|-----------------|
| 有料検索     | 50%    | 2.1     | 12          | 100  | 100      | 150             |
| 自然検索     | 40%    | 2.5     | 8           | 80   | 90       | 130             |
| Twitter      | 80%    | 1.2     | 5           | 30   | 120      | 125             |
| Facebook     | 70%    | 1.5     | 6           | 40   | 120      | 130             |

* 値はダミーです
* スコア（この例では「関心度」）は、event変数を複数使えば、複数設定できます
* 訪問あたりの指標を出すため、計算指標を設定すると便利です
* 指標は複数並べて分析すると、違いや意味を読み取りやすくなります
* 直帰した訪問者はセグメントから除外すると良いですが、工夫が必要です
* 訪問（セッション）あたりのページビューを得るためには、前ページ閲覧時に一つevent変数をセットする必要があります

というわけで少し複雑ですが、深い分析が可能になるので、ぜひ実践してみてください。

元ネタはこちら：[Visitor Scoring in SiteCatalyst](https://theblog.adobe.com/summit-topic-1-visitor-scoring-in-sitecatalyst) (Adobe Blog)  
Omniture Summit 2010で紹介された手法です。